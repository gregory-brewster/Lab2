<!DOCTYPE html>
<html>
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

      <script type="text/javascript" src="{{ url_for('js', filename='javascript.js') }}"></script>

      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Bootstrap 4 DatePicker</title>
      <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
      <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
      <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />

      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin=""/>

        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
          integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
          crossorigin=""></script>


        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bootstrap 4 DatePicker</title>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
        <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />



        <style>
          #mapid { width: 900px; height: 500px; }
        </style>


    </head>
    <body>
      <h5>Map of Calgary</h5>

        <div id="mapid"></div>

          <script>

          // initialize the map
           var mymap = L.map('mapid').setView([51.0447, -114.0719], 11.3);

          // initialize the marker. Option 1
           var marker = L.marker([51.09, -114.09]).addTo(mymap);

          // load a tile layer
           L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
             attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
             maxZoom: 18,
             id: 'mapbox/streets-v11',
             tileSize: 512,
             zoomOffset: -1,
             accessToken: 'pk.eyJ1IjoiandncHMiLCJhIjoiY2tsZnFtNGFxMXdtbDJ3cDk4eTB2Zm8yZiJ9.VQFgv97lbXpINd-An29U_w'
           }).addTo(mymap);


           // Load the polygon marker
           var polygon = L.polygon([
             [51.0448, -114.0730],
             [51.0430, -114.0719],
             [51.0446, -114.0710]
           ]).addTo(mymap);

           // The marker option 1
           marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();
           circle.bindPopup("I am a circle.");
           polygon.bindPopup("I am a polygon.");

           //for the GeoJSON
          var geojsonFeature = {
            "type": "Feature",
            "properties": {
                "name": "Coors Field",
                "amenity": "Baseball Stadium",
                "popupContent": "This is where the Rockies play!"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [-114.0719, 51.0447]
            }
          };

          L.geoJSON(geojsonFeature).addTo(map);


            // for the date widget
            $('#datepicker1').datepicker({
                uiLibrary: 'bootstrap4'
            });

            $('#datepicker2').datepicker({
                uiLibrary: 'bootstrap4'
            });


        </script>

        <form action="#" class="ws-validate">
            <div class="form-row">

              <input id="datepicker1" name= "date1" width="276" placeholder="First Date"/>
              <input id="datepicker2" name= "date2" width="276" placeholder="Second Date"/>

            </div>

        	<div class="form-row">
        		<input type="submit" />
        	</div>

        </form>

        <script>

          // Accesses Calgary's API to search for the building permits
          $.ajax({
              url: "https://data.calgary.ca/resource/c2es-76ed.geojson?$where=issueddate > '2020-01-21' and issueddate < '2020-01-23'",
              type: "GET",
              data: {
                "$limit" : 5000,
                "$$app_token" : "YOURAPPTOKENHERE"
              }
          }).done(function(data) {
            alert("Retrieved " + data.length + " records from the dataset!");
            console.log(data);
          });

        </script>

    </body>
</html>
